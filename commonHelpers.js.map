{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"23963114-6d0d5d874ae460d9125bacd21\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\n export async function fetchImages(query, page = 1) {\nconst response = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15\n    }\n})\nreturn response.data;\n }\n\n\n\n\n\n\n\n\n// export async function fetchImages(query) {\n//     // const API_KEY = \"23963114-6d0d5d874ae460d9125bacd21\";\n//     // const BASE_URL = \"https://pixabay.com/api/\";\n    \n//     const params = new URLSearchParams( {\n//         key: API_KEY,\n//         q: query,\n//         image_type: \"photo\",\n//         lang: \"en\",\n//         safesearch: \"true\"\n//     })\n\n// const url = `${BASE_URL}?${params}`\n\n//     const response = await fetch (url);\n//     if (!response.ok) {\n//       throw new Error('Failed to fetch images');\n//     }\n//     return response.json();\n//   }","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    caption: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });;\n  \n   export function createGallery (images, isNewQuery) {\n    const gallery = document.querySelector('.gallery');\n    if (isNewQuery) {\n      gallery.innerHTML = '';\n    }\n    gallery.innerHTML += images.map(({\n    largeImageURL, \n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads\n  }) => \n    `<li class=\"gallery-item\">\n  <a href=\"${largeImageURL}\" >\n    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n    </a>\n    <div class=\"info\">\n      <p><b>Likes</b> ${likes}</p>\n      <p><b>Views</b> ${views}</p>\n      <p><b>Comments</b> ${comments}</p>\n      <p><b>Downloads</b> ${downloads}</p>\n    </div>\n  \n  </li>`).join('');\n    \n  lightbox.refresh();\n\n  // const newHeight = gallery.clientHeight;\n  // window.scrollBy({\n  //   top: newHeight - prevHeight,\n  //   behavior: 'smooth'\n  // });\n  }\n\n  export function showError(message) {\n    iziToast.error({\n      title: 'Error',\n      message: message,\n      position: 'topRight'\n    });\n  }\n\n\n\n  export function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n  }\n  \n  export function showLoader() {\n    document.querySelector('.div-loader').classList.remove('hidden');\n  }\n  \n  export function hideLoader() {\n    document.querySelector('.div-loader').classList.add('hidden');\n  }\n\n\n  export function toggleLoadMoreButton(show) {\n    const loadMoreButton = document.querySelector('.btn-more');\n    if (show) {\n      loadMoreButton.classList.remove('hidden');\n    } else {\n  loadMoreButton.classList.add('hidden')\n    }\n  }","import iziToast from 'izitoast';\nimport { fetchImages } from './js/pixabay-api';\nimport { createGallery, showError, clearGallery, showLoader, hideLoader, toggleLoadMoreButton, } from './js/render-functions';\n\nconst gallery = document.querySelector(\".gallery\")\n\nlet currentPage = 1;\nlet currentQuery = \"\";\n\ndocument.querySelector('.search-form').addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const query = event.target.elements.images.value.trim();\n    console.log(query)\n    if (!query) {\n      showError('Please enter a search query');\n      return;\n    }\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    toggleLoadMoreButton(false);\n    showLoader();\n    try {\n      const data = await fetchImages(query);\n      if (data.hits.length === 0) {\n        showError('Sorry, there are no images matching your search query. Please try again!');\n      } else {\n        createGallery(data.hits, true);\n        toggleLoadMoreButton(data.totalHits > currentPage * 15);\n      }\n    } catch (error) {\n      showError(error.message);\n    } finally {\n      hideLoader();\n    }\n  });\n\n\ndocument.querySelector('.btn-more').addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader();\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      if (data.totalHits <= currentPage * 15) {\n        iziToast.info({\n          title: 'info',\n          message: 'Weare sorry, but you`ve reached the end of search result.',\n          position: 'topRight'\n        });\n        toggleLoadMoreButton(false);\n      }\n      createGallery(data.hits);\n      const galleryItems = document.querySelectorAll(\".gallery-item\");\n      if (galleryItems.length > 0) {\n          const itemHeight = galleryItems[0].getBoundingClientRect().height;\n          window.scrollBy({\n              top: itemHeight * 2,\n              behavior: 'smooth'\n          })}\n    } catch (error) {\n      showError(error.message);\n    } finally {\n      hideLoader();\n    }\n  });"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","lightbox","SimpleLightbox","createGallery","images","isNewQuery","gallery","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showError","message","iziToast","clearGallery","showLoader","hideLoader","toggleLoadMoreButton","show","loadMoreButton","currentPage","currentQuery","event","data","error","galleryItems","itemHeight"],"mappings":"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"}